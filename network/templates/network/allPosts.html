{% extends "network/layout.html" %}

{% block body %}

<br>
Debug: Signed in as <strong>{{ user.username }}</strong>

<br>
<br>


{% for tweet in tweets %}

{{ user.username.field.widget.input_type }}

<div class="ms-2 card" style="width: 35rem" data-id="{{tweet.id}}";>
  <div class="card-body rounded">
   <!-- TEMP Name now a hyperlink. TODO direct to correct user. -->
   <h5 class="card-title" href="#"><a href="{% url 'profile' user_id=tweet.author.id%}"><b>@{{ tweet.author}}</b></h5></a>
   <h6 class="card-subtitle mb-2 text-muted">{{tweet.posted}}</h6>
   <p class="card-text">{{tweet.tweetText}}</p>
   <button class="btn btn-secondary float-left" id="foo">&hearts;&nbsp;<span id="bar">0</span></button> 
   
   {% if user.username == tweet.author|stringformat:'s' %}

   <button class="btn btn-primary float-end booboo" id="baz">  Edit</button>
   {% endif %}

 </div>
</div>
<br>


{% endfor %}

<script>

document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('button').forEach(button => {
                button.onclick = function() {

                  if (this.className === "btn btn-primary float-end booboo") {
                    alert("You clicked edit")
                    alert(`Post number: ${this.parentElement.parentElement.dataset.id}`)

                    // change to textarea
                    document.querySelector("#baz").style.color = "red";


                  }

                  else if (this.className === "btn btn-secondary float-left") {
                    alert("You clicked like")
                    alert(`Post number: ${this.parentElement.parentElement.dataset.id}`)
                  }
                }
            });
});

</script>

  {% endblock %}
